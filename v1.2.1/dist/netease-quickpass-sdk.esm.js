function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(r,!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=8,s=function(e){var t,r,n,o,i,a,c,s="",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e);d<e.length;)o=(t=e.charCodeAt(d++))>>2,i=(3&t)<<4|(r=e.charCodeAt(d++))>>4,a=(15&r)<<2|(n=e.charCodeAt(d++))>>6,c=63&n,isNaN(r)?a=c=64:isNaN(n)&&(c=64),s=s+u.charAt(o)+u.charAt(i)+u.charAt(a)+u.charAt(c);return s};function u(e,t,r,n,o,i){return p((a=p(p(t,e),p(n,i)))<<(c=o)|a>>>32-c,r);var a,c}function d(e,t,r,n,o,i,a){return u(t&r|~t&n,e,t,o,i,a)}function f(e,t,r,n,o,i,a){return u(t&n|r&~n,e,t,o,i,a)}function l(e,t,r,n,o,i,a){return u(t^r^n,e,t,o,i,a)}function h(e,t,r,n,o,i,a){return u(r^(t|~n),e,t,o,i,a)}function p(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function v(e){return function(e){for(var t="",r=0;r<4*e.length;r++)t+="0123456789abcdef".charAt(e[r>>2]>>r%4*8+4&15)+"0123456789abcdef".charAt(e[r>>2]>>r%4*8&15);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<e.length;a+=16){var c=r,s=n,u=o,v=i;r=d(r,n,o,i,e[a+0],7,-680876936),i=d(i,r,n,o,e[a+1],12,-389564586),o=d(o,i,r,n,e[a+2],17,606105819),n=d(n,o,i,r,e[a+3],22,-1044525330),r=d(r,n,o,i,e[a+4],7,-176418897),i=d(i,r,n,o,e[a+5],12,1200080426),o=d(o,i,r,n,e[a+6],17,-1473231341),n=d(n,o,i,r,e[a+7],22,-45705983),r=d(r,n,o,i,e[a+8],7,1770035416),i=d(i,r,n,o,e[a+9],12,-1958414417),o=d(o,i,r,n,e[a+10],17,-42063),n=d(n,o,i,r,e[a+11],22,-1990404162),r=d(r,n,o,i,e[a+12],7,1804603682),i=d(i,r,n,o,e[a+13],12,-40341101),o=d(o,i,r,n,e[a+14],17,-1502002290),r=f(r,n=d(n,o,i,r,e[a+15],22,1236535329),o,i,e[a+1],5,-165796510),i=f(i,r,n,o,e[a+6],9,-1069501632),o=f(o,i,r,n,e[a+11],14,643717713),n=f(n,o,i,r,e[a+0],20,-373897302),r=f(r,n,o,i,e[a+5],5,-701558691),i=f(i,r,n,o,e[a+10],9,38016083),o=f(o,i,r,n,e[a+15],14,-660478335),n=f(n,o,i,r,e[a+4],20,-405537848),r=f(r,n,o,i,e[a+9],5,568446438),i=f(i,r,n,o,e[a+14],9,-1019803690),o=f(o,i,r,n,e[a+3],14,-187363961),n=f(n,o,i,r,e[a+8],20,1163531501),r=f(r,n,o,i,e[a+13],5,-1444681467),i=f(i,r,n,o,e[a+2],9,-51403784),o=f(o,i,r,n,e[a+7],14,1735328473),r=l(r,n=f(n,o,i,r,e[a+12],20,-1926607734),o,i,e[a+5],4,-378558),i=l(i,r,n,o,e[a+8],11,-2022574463),o=l(o,i,r,n,e[a+11],16,1839030562),n=l(n,o,i,r,e[a+14],23,-35309556),r=l(r,n,o,i,e[a+1],4,-1530992060),i=l(i,r,n,o,e[a+4],11,1272893353),o=l(o,i,r,n,e[a+7],16,-155497632),n=l(n,o,i,r,e[a+10],23,-1094730640),r=l(r,n,o,i,e[a+13],4,681279174),i=l(i,r,n,o,e[a+0],11,-358537222),o=l(o,i,r,n,e[a+3],16,-722521979),n=l(n,o,i,r,e[a+6],23,76029189),r=l(r,n,o,i,e[a+9],4,-640364487),i=l(i,r,n,o,e[a+12],11,-421815835),o=l(o,i,r,n,e[a+15],16,530742520),r=h(r,n=l(n,o,i,r,e[a+2],23,-995338651),o,i,e[a+0],6,-198630844),i=h(i,r,n,o,e[a+7],10,1126891415),o=h(o,i,r,n,e[a+14],15,-1416354905),n=h(n,o,i,r,e[a+5],21,-57434055),r=h(r,n,o,i,e[a+12],6,1700485571),i=h(i,r,n,o,e[a+3],10,-1894986606),o=h(o,i,r,n,e[a+10],15,-1051523),n=h(n,o,i,r,e[a+1],21,-2054922799),r=h(r,n,o,i,e[a+8],6,1873313359),i=h(i,r,n,o,e[a+15],10,-30611744),o=h(o,i,r,n,e[a+6],15,-1560198380),n=h(n,o,i,r,e[a+13],21,1309151649),r=h(r,n,o,i,e[a+4],6,-145523070),i=h(i,r,n,o,e[a+11],10,-1120210379),o=h(o,i,r,n,e[a+2],15,718787259),n=h(n,o,i,r,e[a+9],21,-343485551),r=p(r,c),n=p(n,s),o=p(o,u),i=p(i,v)}return Array(r,n,o,i)}(function(e){for(var t=Array(),r=(1<<c)-1,n=0;n<e.length*c;n+=c)t[n>>5]|=(e.charCodeAt(n/c)&r)<<n%32;return t}(e),e.length*c))}var y,_,m,g=g||function(e,t){var r={},n=r.lib={},o=function(){},i=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;o<e;o++)t[n+o>>>2]|=(r[o>>>2]>>>24-o%4*8&255)<<24-(n+o)%4*8;else if(65535<r.length)for(o=0;o<e;o+=4)t[n+o>>>2]=r[o>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new a.init(r,t)}}),c=r.enc={},s=c.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var o=t[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(r,t/2)}},u=c.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(r,t)}},d=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,c=o/(4*i);if(t=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*i,o=e.min(4*t,o),t){for(var s=0;s<t;s+=i)this._doProcessBlock(n,s);s=n.splice(0,t),r.sigBytes-=o}return new a.init(s,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new l.HMAC.init(e,r).finalize(t)}}});var l=r.algo={};return r}(Math);_=(y=g).lib.WordArray,y.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var o=0;o<r;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;4>a&&o+.75*a<r;a++)e.push(n.charAt(i>>>6*(3-a)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(n=r.charAt(64))&&-1!=(n=e.indexOf(n))&&(t=n);for(var n=[],o=0,i=0;i<t;i++)if(i%4){var a=r.indexOf(e.charAt(i-1))<<i%4*2,c=r.indexOf(e.charAt(i))>>>6-i%4*2;n[o>>>2]|=(a|c)<<24-o%4*8,o++}return _.create(n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,r,n,o,i,a){return((e=e+(t&r|~t&n)+o+a)<<i|e>>>32-i)+t}function r(e,t,r,n,o,i,a){return((e=e+(t&n|r&~n)+o+a)<<i|e>>>32-i)+t}function n(e,t,r,n,o,i,a){return((e=e+(t^r^n)+o+a)<<i|e>>>32-i)+t}function o(e,t,r,n,o,i,a){return((e=e+(r^(t|~n))+o+a)<<i|e>>>32-i)+t}for(var i=g,a=(s=i.lib).WordArray,c=s.Hasher,s=i.algo,u=[],d=0;64>d;d++)u[d]=4294967296*e.abs(e.sin(d+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var a=0;16>a;a++){var c=e[s=i+a];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}a=this._hash.words;var s=e[i+0],d=(c=e[i+1],e[i+2]),f=e[i+3],l=e[i+4],h=e[i+5],p=e[i+6],v=e[i+7],y=e[i+8],_=e[i+9],m=e[i+10],g=e[i+11],R=e[i+12],E=e[i+13],O=e[i+14],S=e[i+15],C=t(C=a[0],b=a[1],k=a[2],w=a[3],s,7,u[0]),w=t(w,C,b,k,c,12,u[1]),k=t(k,w,C,b,d,17,u[2]),b=t(b,k,w,C,f,22,u[3]);C=t(C,b,k,w,l,7,u[4]),w=t(w,C,b,k,h,12,u[5]),k=t(k,w,C,b,p,17,u[6]),b=t(b,k,w,C,v,22,u[7]),C=t(C,b,k,w,y,7,u[8]),w=t(w,C,b,k,_,12,u[9]),k=t(k,w,C,b,m,17,u[10]),b=t(b,k,w,C,g,22,u[11]),C=t(C,b,k,w,R,7,u[12]),w=t(w,C,b,k,E,12,u[13]),k=t(k,w,C,b,O,17,u[14]),C=r(C,b=t(b,k,w,C,S,22,u[15]),k,w,c,5,u[16]),w=r(w,C,b,k,p,9,u[17]),k=r(k,w,C,b,g,14,u[18]),b=r(b,k,w,C,s,20,u[19]),C=r(C,b,k,w,h,5,u[20]),w=r(w,C,b,k,m,9,u[21]),k=r(k,w,C,b,S,14,u[22]),b=r(b,k,w,C,l,20,u[23]),C=r(C,b,k,w,_,5,u[24]),w=r(w,C,b,k,O,9,u[25]),k=r(k,w,C,b,f,14,u[26]),b=r(b,k,w,C,y,20,u[27]),C=r(C,b,k,w,E,5,u[28]),w=r(w,C,b,k,d,9,u[29]),k=r(k,w,C,b,v,14,u[30]),C=n(C,b=r(b,k,w,C,R,20,u[31]),k,w,h,4,u[32]),w=n(w,C,b,k,y,11,u[33]),k=n(k,w,C,b,g,16,u[34]),b=n(b,k,w,C,O,23,u[35]),C=n(C,b,k,w,c,4,u[36]),w=n(w,C,b,k,l,11,u[37]),k=n(k,w,C,b,v,16,u[38]),b=n(b,k,w,C,m,23,u[39]),C=n(C,b,k,w,E,4,u[40]),w=n(w,C,b,k,s,11,u[41]),k=n(k,w,C,b,f,16,u[42]),b=n(b,k,w,C,p,23,u[43]),C=n(C,b,k,w,_,4,u[44]),w=n(w,C,b,k,R,11,u[45]),k=n(k,w,C,b,S,16,u[46]),C=o(C,b=n(b,k,w,C,d,23,u[47]),k,w,s,6,u[48]),w=o(w,C,b,k,v,10,u[49]),k=o(k,w,C,b,O,15,u[50]),b=o(b,k,w,C,h,21,u[51]),C=o(C,b,k,w,R,6,u[52]),w=o(w,C,b,k,f,10,u[53]),k=o(k,w,C,b,m,15,u[54]),b=o(b,k,w,C,c,21,u[55]),C=o(C,b,k,w,y,6,u[56]),w=o(w,C,b,k,S,10,u[57]),k=o(k,w,C,b,p,15,u[58]),b=o(b,k,w,C,E,21,u[59]),C=o(C,b,k,w,l,6,u[60]),w=o(w,C,b,k,g,10,u[61]),k=o(k,w,C,b,d,15,u[62]),b=o(b,k,w,C,_,21,u[63]);a[0]=a[0]+C|0,a[1]=a[1]+b|0,a[2]=a[2]+k|0,a[3]=a[3]+w|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;r[o>>>5]|=128<<24-o%32;var i=e.floor(n/4294967296);for(r[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,n=0;4>n;n++)o=r[n],r[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=c._createHelper(s),i.HmacMD5=c._createHmacHelper(s)}(Math),function(){var e,t=g,r=(e=t.lib).Base,n=e.WordArray,o=(e=t.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=(c=this.cfg).hasher.create(),o=n.create(),i=o.words,a=c.keySize,c=c.iterations;i.length<a;){s&&r.update(s);var s=r.update(e).finalize(t);r.reset();for(var u=1;u<c;u++)s=r.finalize(s),r.reset();o.concat(s)}return o.sigBytes=4*a,o}});t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)}}(),g.lib.Cipher||function(e){var t=(h=g).lib,r=t.Base,n=t.WordArray,o=t.BufferedBlockAlgorithm,i=h.enc.Base64,a=h.algo.EvpKDF,c=t.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?p:l).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?p:l).decrypt(e,t,r,n)}}}});t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var s=h.mode={},u=function(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var o=0;o<r;o++)e[t+o]^=n[o]},d=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;u.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),d.Decryptor=d.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,o=e.slice(t,t+n);r.decryptBlock(e,t),u.call(this,e,t,n),this._prevBlock=o}}),s=s.CBC=d,d=(h.pad={}).Pkcs7={pad:function(e,t){for(var r,o=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,i=[],a=0;a<r;a+=4)i.push(o);r=n.create(i,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:s,padding:d}),reset:function(){c.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(s=(h.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:s}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var o=e.createEncryptor(r,n);return t=o.finalize(t),o=o.cfg,f.create({ciphertext:t,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),h=(h.kdf={}).OpenSSL={execute:function(e,t,r,o){return o||(o=n.random(8)),e=a.create({keySize:t+r}).compute(e,o),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,f.create({key:e,iv:r,salt:o})}},p=t.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:h}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=l.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,l.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=g,t=e.lib.BlockCipher,r=e.algo,n=[],o=[],i=[],a=[],c=[],s=[],u=[],d=[],f=[],l=[],h=[],p=0;256>p;p++)h[p]=128>p?p<<1:p<<1^283;var v=0,y=0;for(p=0;256>p;p++){var _=(_=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&_^99;n[v]=_,o[_]=v;var m=h[v],R=h[m],E=h[R],O=257*h[_]^16843008*_;i[v]=O<<24|O>>>8,a[v]=O<<16|O>>>16,c[v]=O<<8|O>>>24,s[v]=O,O=16843009*E^65537*R^257*m^16843008*v,u[_]=O<<24|O>>>8,d[_]=O<<16|O>>>16,f[_]=O<<8|O>>>24,l[_]=O,v?(v=m^h[h[h[E^m]]],y^=h[h[y]]):v=y=1}var S=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),o=this._keySchedule=[],i=0;i<r;i++)if(i<t)o[i]=e[i];else{var a=o[i-1];i%t?6<t&&4==i%t&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=S[i/t|0]<<24),o[i]=o[i-t]^a}for(e=this._invKeySchedule=[],t=0;t<r;t++)i=r-t,a=t%4?o[i]:o[i-4],e[t]=4>t||4>=i?a:u[n[a>>>24]]^d[n[a>>>16&255]]^f[n[a>>>8&255]]^l[n[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,c,s,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,d,f,l,o),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,o,i,a,c){for(var s=this._nRounds,u=e[t]^r[0],d=e[t+1]^r[1],f=e[t+2]^r[2],l=e[t+3]^r[3],h=4,p=1;p<s;p++){var v=n[u>>>24]^o[d>>>16&255]^i[f>>>8&255]^a[255&l]^r[h++],y=n[d>>>24]^o[f>>>16&255]^i[l>>>8&255]^a[255&u]^r[h++],_=n[f>>>24]^o[l>>>16&255]^i[u>>>8&255]^a[255&d]^r[h++];l=n[l>>>24]^o[u>>>16&255]^i[d>>>8&255]^a[255&f]^r[h++],u=v,d=y,f=_}v=(c[u>>>24]<<24|c[d>>>16&255]<<16|c[f>>>8&255]<<8|c[255&l])^r[h++],y=(c[d>>>24]<<24|c[f>>>16&255]<<16|c[l>>>8&255]<<8|c[255&u])^r[h++],_=(c[f>>>24]<<24|c[l>>>16&255]<<16|c[u>>>8&255]<<8|c[255&d])^r[h++],l=(c[l>>>24]<<24|c[u>>>16&255]<<16|c[d>>>8&255]<<8|c[255&f])^r[h++],e[t]=v,e[t+1]=y,e[t+2]=_,e[t+3]=l},keySize:8});e.AES=t._createHelper(r)}(),g.mode.ECB=((m=g.lib.BlockCipherMode.extend()).Encryptor=m.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),m.Decryptor=m.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),m);var R,E,O=function(){},S=function(e,t){if(!e)throw new Error("[NEQuickPass] ".concat(t))},C=function(e){return e?Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&"):""},w=function(e,t){var r,n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(r=0;r<e;r++)i[r]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(n=0|16*Math.random(),i[r]=o[19===r?3&n|8:n]);return i.join("")},k=(R=[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.cookieEnabled,navigator.cpuClass,navigator.hardwareConcurrency,navigator.language,navigator.plugins,screen.availWidth,navigator.availHeight,screen.colorDepth,Date.getTimezoneOffset],E=[navigator.platform,navigator.userAgent,v(R.join("@@"))].join("@@"),encodeURIComponent(s(E)));function b(){return location.href.replace(/\?[\s\S]*/,"").substring(0,128)}var B=0;function T(){}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Math.random().toString(36).slice(2,9),r=e.prefix||"__JSONP";return e.name||r+"_".concat(t)+"_".concat(B++)}function x(t,r,n,o){"object"===e(n)&&(o=n,n=null),"function"==typeof r&&(n=r,r=null),o||(o={});var i,a=o&&o.callbackName||I(),c=void 0===o.param?"callback":o.param,s=o.timeout||6e3,u=window.encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head;function f(){l.parentNode&&l.parentNode.removeChild(l),window[a]=T,i&&clearTimeout(i)}s&&(i=setTimeout((function(){if(f(),n){var e=new Error("request ".concat(t," timeout"));e.type="timeout",n(e)}}),s)),window[a]=function(e){f(),n&&n(null,e)},r&&(t=t.split("?")[0]),t=(t+=(~t.indexOf("?")?"&":"?")+function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(u(r)+"="+u(e[r]));return t.join("&")}(r)+(c?"&"+c+"="+u(a):"")).replace("?&","?");var l=document.createElement("script");return l.type="text/javascript",l.src=t,d.parentNode.insertBefore(l,d),function(){window[a]&&f()}}var N={TEL:[1,"电信"],MOBILE:[2,"移动"],UNICOM:[3,"联通"]},U={CU_AUTH_ERROR:[100001,"联通应用鉴权错误"],CU_CONFIG_ERROR:[200001,"获取联通配置接口错误等"],CU_GETWAY_ERROR:[300001,"网关鉴权失败"],CU_AUTH_CODE_ERROR:[300002,"鉴权码获取失败"],CU_ACESSS_ERROR:[300003,"联通sdk-server预取号失败"],CU_TOKEN_ERROR:[100001,"联通获取token失败"],FETCH_ERROR:[-8001,"网络请求错误"],FETCH_TIMEOUT_ERROR:[504,"网络请求超时"],NETWORK_TYPE_ERROR:[505,"仅支持纯4G网络验证，不支持“4G+WIFI”或“仅开启WIFI”"],BUSINESS_ERROR:[200,"业务错误"],SCRIPT_ERROR:[100,"脚本错误"],UNKNOWN_ERROR:[1e3,"未知错误"]},P=[1,"易盾接口"],A=[2,"运营商接口"],M=[3,"SDK"];function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=e.url,n=e.method,o=e.timeout,i=e.headers,a=e.data,c=new XMLHttpRequest;if(!c){var s=new Error("cannot creat an XMLHTTP instance");return s.code=U.SCRIPT_ERROR[0],t(s)}for(var u in c.onreadystatechange=function(){var r=void 0!==XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;if(c.readyState===r)if(304===c.status||c.status>=200&&c.status<300){var n=JSON.parse(c.responseText);t(null,n,c)}else{var o=new Error("request ".concat(e.url," api error"));o.data={url:e.url,status:c.status},o.code=0===c.status?U.FETCH_TIMEOUT_ERROR[0]:U.FETCH_ERROR[0],t(o)}},c.open(n,r,!0),c.timeout=o,i)i.hasOwnProperty(u)&&c.setRequestHeader(u,i[u]);c.send("get"===n?null:JSON.stringify(a))}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,r=e.url,n=e.timeout,o=e.tryError,i=void 0!==o&&o,a=null;function c(){s.parentNode&&document.body.removeChild(s),a&&clearTimeout(a)}n&&(a=window.setTimeout((function(){c();var e=new Error("request ".concat(r," timeout"));e.data={url:r},e.code=U.FETCH_TIMEOUT_ERROR[0],t(e)}),n));var s=new Image;s.src=r,s.style.display="none",document.body.appendChild(s),s.onload=function(){s.parentNode&&(c(),t())},s.onerror=function(){if(s.parentNode){c();var e=new Error("".concat(r));e.data={type:"img",url:r},e.code=U.FETCH_ERROR[0],i?D({url:r.replace("http://","https://"),method:"GET"},(function(r,n){!r&&n&&(e.code=U.BUSINESS_ERROR[0],e.data._code=n.header&&n.header.resultCode,n.body&&(e.message=n.body.resultDesc)),t(e)})):t(e)}}}function H(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.method,n=void 0===r?"get":r,o=t.data,i=void 0===o?null:o,c=t.callbackName,s=t.param,u=void 0===s?"callback":s,d=t.timeout,f=void 0===d?6e3:d,l=t.disableRetry,h=t.onError,p=void 0===h?O:h,v=t.url||"";v=l?Array.isArray(v)?v[0].slice(0,1):[v]:"string"==typeof(e=v)?[e,e]:Array.isArray(e)&&1===e.length?e.concat(e):e;var y=t.headers||{},_=C(i);return new Promise((function(e,t){!function r(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=v[o];"post"!==n&&_&&(s=s+"?"+_);var d=function(n,i,c){if(n){var u=new Error(n.message);n.data?u.data=a({},n.data):u.data={url:s},u.code=n.code||("timeout"===n.type?U.FETCH_TIMEOUT_ERROR[0]:U.FETCH_ERROR[0]),o<v.length-1?r(o+1):t(u),p(s,{error:u,index:o})}else e({data:i,xhr:c})};"jsonp"===n?x(s,i,d,{callbackName:c,param:u,timeout:f}):"img"===n?z({url:s,timeout:f,tryError:o===v.length-1},d):D({url:s,data:i,method:n,timeout:f,headers:y},d)}(0)}))}function F(){}var j,K,L=(j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return G(q((function(){var r=t.apiServer,n=t.appId,o="https://".concat(r[0],"/v1/collect"),i=e.data||{};return W(H({url:o,method:"post",data:{businessId:n,token:i.token,monitorType:i.monitorType||M[0],errorType:i.code,httpCode:i.status,code:i._cuCode||i._code,message:e.message,requestURL:i.url,ot:i.ot,envType:3,clientTime:Date.now(),retryTimes:i.index,version:"1.2.1",refer:b()},headers:{"Content-Type":"application/json; charset=utf-8"},disableRetry:!0}))}),F))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(j.apply(this,e))}catch(r){return Promise.reject(r)}});function W(e,t){if(!t)return e&&e.then?e.then(F):Promise.resolve()}function q(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}function G(e){if(e&&e.then)return e.then(F)}var X=(o(K={},U.BUSINESS_ERROR[0],4),o(K,U.FETCH_TIMEOUT_ERROR[0],3),o(K,U.SCRIPT_ERROR[0],6),K),J=function(){function e(r){t(this,e),this._quickPassConf=r}return n(e,[{key:"collectErr",value:function(e,t){var r=new Error(e.message);e.data?r.data=a({},e.data,{code:X[e.code]||7}):r.data={code:7},L(r,this._quickPassConf,t)}}]),e}();function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,n){var o=n.error,i=n.index;if(e)try{o&&(o.data=a({},o.data,{index:i},t),e.collectErr(o))}catch(c){}}}function Q(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var V=$((function(t,r,n,o,i){var c=a({},t,{nonce:w(32),timestamp:Date.now(),extData:JSON.stringify({cm:{userInformation:k},ct:{callback:n},cu:{}})}),s=function(t){var r="".concat(w(3),":").concat(w(3),":").concat(w(3),":").concat(w(4)),n=g.enc.Utf8.parse(r),o=g.AES.encrypt(t,n,{mode:g.mode.ECB,padding:g.pad.Pkcs7}).ciphertext.toString(),i=g.enc.Hex.parse(o),a=g.enc.Base64.stringify(i);return"object"===e(t)&&(t=JSON.stringify(t)),{key:r,parsedKey:n,eyptStr:a}}(JSON.stringify(c)),u=s.key,d=s.eyptStr,f=s.parsedKey;return Q(H({url:r,data:{d:d,rk:u},disableRetry:!0,onError:Y(o,{monitorType:P[0],index:i})}),(function(e){return{res:e.data,parsedKey:f}}))})),Z=$((function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a({monitorType:A[0],ot:N.UNICOM[0]},n),i=Y(r,o),c=$((function(e){var t="https://sdk.microwu.com/api-config/app/v1/get-config";return Q(H({url:t,method:"get",headers:e,onError:i}),(function(e){var r=e.data;if(0===r.result)return{appId:r.content.appId,nisPortalAddress:r.content.nisPortalAddress};var n=null;throw[104,107].indexOf(r.result)>-1?(n=new Error("".concat(U.CU_AUTH_ERROR[1]))).data=a({},o,{_code:U.CU_AUTH_ERROR[0]}):(n=new Error("".concat(U.CU_CONFIG_ERROR[1]))).data=a({},o,{_code:U.CU_CONFIG_ERROR[0]}),n.data._cuCode=r.result,n.data.url=t,n.code=U.BUSINESS_ERROR[0],n}))})),s=$((function(e,t){var r=e.code,n=e.province,c="https://sdk.microwu.com/api-verify-mobile/app/v1/pre-net-id";return Q(H({url:c,method:"get",headers:t,data:{code:r,deviceInfo:'{"device-id":""}',province:n,sign:v("code=".concat(r,'&deviceInfo={"device-id":""}&province=').concat(n))},onError:i}),(function(e){var t=e.data,r=e.xhr;if(0===t.result)return{traceId:t.content.traceId||r.getResponseHeader("Trace-Id"),accessCode:t.content.accessCode};var n=new Error(U.CU_CONFIG_ERROR[1]);throw n.data=a({},o,{url:c,_code:U.CU_CONFIG_ERROR[0],_cuCode:t.result}),n.code=U.BUSINESS_ERROR[0],n}))}));return Q(c(t),(function(e){var r=e.nisPortalAddress,n=e.appId;return Q(H({url:r,method:"jsonp",callbackName:"getPortal",data:{appId:n},onError:i}),(function(e){var c=e.data.authurl;if(!c){var u=new Error(U.CU_GETWAY_ERROR[1]);throw u.data=a({},o,{url:r,_code:U.CU_GETWAY_ERROR[0]}),u.code=U.BUSINESS_ERROR[0],u}var d="".concat(c,"/api");return Q(H({url:d,method:"jsonp",callbackName:"getProvincePortal",data:{appId:n},onError:i}),(function(e){var r=e.data,n=r.code,i=r.province;if(!n||!i){var c=new Error(U.CU_AUTH_CODE_ERROR[1]);throw c.data=a({},o,{url:d,_code:U.CU_AUTH_CODE_ERROR[0]}),c.code=U.BUSINESS_ERROR[0],c}return Q(s({code:n,province:i},t))}))}))}))}));function $(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(n){return Promise.reject(n)}}}function ee(){}function te(e,t,r){if(!e.s){if(r instanceof re){if(!r.s)return void(r.o=te.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(te.bind(null,e,t),te.bind(null,e,2));e.s=t,e.v=r;var n=e.o;n&&n(e)}}var re=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,o=this.s;if(o){var i=1&o?t:r;if(i){try{te(n,1,i(this.v))}catch(a){te(n,2,a)}return n}return this}return this.o=function(e){try{var o=e.v;1&e.s?te(n,1,t?t(o):o):r?te(n,1,r(o)):te(n,2,o)}catch(a){te(n,2,a)}},n},e}();var ne=function(){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),S(r,"appId is required"),this.appId=r,this.timeout="number"==typeof n.timeout?n.timeout:12e4,this.apiServer=n.apiServer||["ye.dun.163.com","ye.dun.163yun.com"],this.timer=null,this.cuHeaders=null,"string"==typeof this.apiServer&&(this.apiServer=[this.apiServer,this.apiServer]),this._collector=new J({appId:this.appId,apiServer:this.apiServer})}return n(e,[{key:"getToken",value:function(e,t){try{var r=this;if(r.timer)return;return Q(Promise.race([new Promise((function(e,t){r.timer=setTimeout((function(){r.timer=null,t(new Error("get Token timeout"))}),r.timeout)})),$((function(){var t,n=!1;if(t=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{type:"unknown"},"onLine"in navigator&&!navigator.onLine||t.type&&!["cellular","unknown","none"].includes(t.type)){var o=new Error(U.NETWORK_TYPE_ERROR[1]);throw o.code=U.NETWORK_TYPE_ERROR[0],o}var i=r.apiServer.map((function(e){return"https://".concat(e,"/v1/preCheck")})),c=I(),s={businessId:r.appId,phone:e,envType:3},u=null,d="",f=null;return function(e,t){return e&&e.then?e.then(t):t(e)}(function(e,t,r){var n,o,i=-1;return function a(c){try{for(;++i<e.length&&(!r||!r());)if((c=t(i))&&c.then){if(!((s=c)instanceof re&&1&s.s))return void c.then(a,o||(o=te.bind(null,n=new re,2)));c=c.v}n?te(n,1,c):n=c}catch(u){te(n||(n=new re),2,u)}var s}(),n}(i,(function(e){var t=i[e];return function(e){if(e&&e.then)return e.then(ee)}(function(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}((function(){return Q(V(s,t,c,r._collector,e),(function(e){u=e.res,d=e.parsedKey,n=!0}))}),(function(r){(f=r).data=a({},r.data,{url:t,monitorType:P[0],index:e})})))}),(function(){return n})),(function(){if(f)throw f;if(!u){var e=new Error("precheck response data error");throw e.code=U.BUSINESS_ERROR[0],e}if(200!==u.code){var t=new Error(u.msg);throw t.data={url:i[0],_code:u.code},t.code=U.BUSINESS_ERROR[0],t}var n,o,s,l,h=JSON.parse((n=u.data,o=d,g.AES.decrypt(n,o,{mode:g.mode.ECB,padding:g.pad.Pkcs7}).toString(g.enc.Utf8))),p=h.ot,y=h.token,_="",m="post",R=null,E=null,O={monitorType:A[0],ot:p,token:y};return s=function(e){return Q(H({url:_,method:m,data:R,callbackName:c,param:"",headers:E,onError:Y(r._collector,O)}),(function(e){var t=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t===N.MOBILE[0]){var n=e.body.token;if(!n){var o=new Error(e.body.resultDesc);throw o.data=a({},r,{_code:e.header.resultCode}),o.code=U.BUSINESS_ERROR[0],o}return n}if(t===N.UNICOM[0]){if(0!==e.result){var i=new Error(U.CU_TOKEN_ERROR[1]);throw i.data=a({},r,{_code:U.CU_TOKEN_ERROR[0]}),i.code=U.BUSINESS_ERROR[0],i}return e.content.accessToken}if(t===N.TEL[0]){if(0!==e.result){var c=new Error(e.msg);throw c.data=a({},r,{_code:e.result}),c.code=U.BUSINESS_ERROR[0],c}return e.data}return""}(e.data,p,O);return clearTimeout(r.timer),r.timer=null,{token:y,accessToken:t}}))},(l=function(){if(p===N.MOBILE[0]){var e=JSON.parse(h.url||{});return Q(H({url:e.preUrl,method:"img",onError:Y(r._collector,O)}),(function(){var t=e.tokenUrl,r=t.header,n=t.body,o=t.api;_=o,R={header:r,body:n}}))}return function(){if(p!==N.TEL[0])return function(){if(p===N.UNICOM[0]){var e=JSON.parse(h.url||{});_="https://sdk.microwu.com/api-verify-mobile/app/v1/login";var t={"Req-Timestamp":e.reqTimeStamp,"Client-Id":e.clientId,Authorization:"Digest ".concat(e.authorization),"Client-Type":"H5"};return Q(Z(e,t,r._collector,{token:y}),(function(e){E=a({},t,{"Trace-Id":e.traceId}),R={accessCode:e.accessCode,sign:v("accessCode=".concat(e.accessCode))},m="get"}))}throw new Error("当前仅支持移动/联通/电信")}();_=h.url,m="jsonp"}()}())&&l.then?l.then(s):s(l)}))}))()]).then((function(e){t(null,e)}),(function(e){!e.code&&(e.code=U.SCRIPT_ERROR[0]),r._collectErr(e);var n=new Error("[NEQuickPass]: ".concat(e?e.message:"unknow error"));e.data&&(n.data={_code:e.data._code,url:e.data.url}),n.code=e.code,t(e)})))}catch(n){return Promise.reject(n)}}},{key:"_collectErr",value:function(e,t){[U.FETCH_ERROR[0],U.FETCH_TIMEOUT_ERROR[0]].includes(e.code)||e.code===U.BUSINESS_ERROR[0]&&e.data&&"img"===e.data.type||this._collector.collectErr(e,t)}}]),e}();ne._VERSION="1.2.1";export default ne;
