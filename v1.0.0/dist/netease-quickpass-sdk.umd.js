!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).NEQuickPass=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=8,n=function(t){var e,r,n,i,o,a,c,s="",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0;for(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(t);f<t.length;)i=(e=t.charCodeAt(f++))>>2,o=(3&e)<<4|(r=t.charCodeAt(f++))>>4,a=(15&r)<<2|(n=t.charCodeAt(f++))>>6,c=63&n,isNaN(r)?a=c=64:isNaN(n)&&(c=64),s=s+u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(c);return s};function i(t,e,r,n,i,o){return u((a=u(u(e,t),u(n,o)))<<(c=i)|a>>>32-c,r);var a,c}function o(t,e,r,n,o,a,c){return i(e&r|~e&n,t,e,o,a,c)}function a(t,e,r,n,o,a,c){return i(e&n|r&~n,t,e,o,a,c)}function c(t,e,r,n,o,a,c){return i(e^r^n,t,e,o,a,c)}function s(t,e,r,n,o,a,c){return i(r^(e|~n),t,e,o,a,c)}function u(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function f(t){return function(t){for(var e="",r=0;r<4*t.length;r++)e+="0123456789abcdef".charAt(t[r>>2]>>r%4*8+4&15)+"0123456789abcdef".charAt(t[r>>2]>>r%4*8&15);return e}(function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var r=1732584193,n=-271733879,i=-1732584194,f=271733878,h=0;h<t.length;h+=16){var d=r,l=n,p=i,y=f;r=o(r,n,i,f,t[h+0],7,-680876936),f=o(f,r,n,i,t[h+1],12,-389564586),i=o(i,f,r,n,t[h+2],17,606105819),n=o(n,i,f,r,t[h+3],22,-1044525330),r=o(r,n,i,f,t[h+4],7,-176418897),f=o(f,r,n,i,t[h+5],12,1200080426),i=o(i,f,r,n,t[h+6],17,-1473231341),n=o(n,i,f,r,t[h+7],22,-45705983),r=o(r,n,i,f,t[h+8],7,1770035416),f=o(f,r,n,i,t[h+9],12,-1958414417),i=o(i,f,r,n,t[h+10],17,-42063),n=o(n,i,f,r,t[h+11],22,-1990404162),r=o(r,n,i,f,t[h+12],7,1804603682),f=o(f,r,n,i,t[h+13],12,-40341101),i=o(i,f,r,n,t[h+14],17,-1502002290),r=a(r,n=o(n,i,f,r,t[h+15],22,1236535329),i,f,t[h+1],5,-165796510),f=a(f,r,n,i,t[h+6],9,-1069501632),i=a(i,f,r,n,t[h+11],14,643717713),n=a(n,i,f,r,t[h+0],20,-373897302),r=a(r,n,i,f,t[h+5],5,-701558691),f=a(f,r,n,i,t[h+10],9,38016083),i=a(i,f,r,n,t[h+15],14,-660478335),n=a(n,i,f,r,t[h+4],20,-405537848),r=a(r,n,i,f,t[h+9],5,568446438),f=a(f,r,n,i,t[h+14],9,-1019803690),i=a(i,f,r,n,t[h+3],14,-187363961),n=a(n,i,f,r,t[h+8],20,1163531501),r=a(r,n,i,f,t[h+13],5,-1444681467),f=a(f,r,n,i,t[h+2],9,-51403784),i=a(i,f,r,n,t[h+7],14,1735328473),r=c(r,n=a(n,i,f,r,t[h+12],20,-1926607734),i,f,t[h+5],4,-378558),f=c(f,r,n,i,t[h+8],11,-2022574463),i=c(i,f,r,n,t[h+11],16,1839030562),n=c(n,i,f,r,t[h+14],23,-35309556),r=c(r,n,i,f,t[h+1],4,-1530992060),f=c(f,r,n,i,t[h+4],11,1272893353),i=c(i,f,r,n,t[h+7],16,-155497632),n=c(n,i,f,r,t[h+10],23,-1094730640),r=c(r,n,i,f,t[h+13],4,681279174),f=c(f,r,n,i,t[h+0],11,-358537222),i=c(i,f,r,n,t[h+3],16,-722521979),n=c(n,i,f,r,t[h+6],23,76029189),r=c(r,n,i,f,t[h+9],4,-640364487),f=c(f,r,n,i,t[h+12],11,-421815835),i=c(i,f,r,n,t[h+15],16,530742520),r=s(r,n=c(n,i,f,r,t[h+2],23,-995338651),i,f,t[h+0],6,-198630844),f=s(f,r,n,i,t[h+7],10,1126891415),i=s(i,f,r,n,t[h+14],15,-1416354905),n=s(n,i,f,r,t[h+5],21,-57434055),r=s(r,n,i,f,t[h+12],6,1700485571),f=s(f,r,n,i,t[h+3],10,-1894986606),i=s(i,f,r,n,t[h+10],15,-1051523),n=s(n,i,f,r,t[h+1],21,-2054922799),r=s(r,n,i,f,t[h+8],6,1873313359),f=s(f,r,n,i,t[h+15],10,-30611744),i=s(i,f,r,n,t[h+6],15,-1560198380),n=s(n,i,f,r,t[h+13],21,1309151649),r=s(r,n,i,f,t[h+4],6,-145523070),f=s(f,r,n,i,t[h+11],10,-1120210379),i=s(i,f,r,n,t[h+2],15,718787259),n=s(n,i,f,r,t[h+9],21,-343485551),r=u(r,d),n=u(n,l),i=u(i,p),f=u(f,y)}return Array(r,n,i,f)}(function(t){for(var e=Array(),n=(1<<r)-1,i=0;i<t.length*r;i+=r)e[i>>5]|=(t.charCodeAt(i/r)&n)<<i%32;return e}(t),t.length*r))}var h,d,l,p=p||function(t,e){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;i<t;i++)e[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<t;i+=4)e[n+i>>>2]=r[i>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;n<e;n+=4)r.push(4294967296*t.random()|0);return new a.init(r,e)}}),c=r.enc={},s=c.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++){var i=e[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new a.init(r,e/2)}},u=c.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new a.init(r,e)}},f=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},h=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,c=i/(4*o);if(e=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*o,i=t.min(4*e,i),e){for(var s=0;s<e;s+=o)this._doProcessBlock(n,s);s=n.splice(0,e),r.sigBytes-=i}return new a.init(s,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new d.HMAC.init(t,r).finalize(e)}}});var d=r.algo={};return r}(Math);d=(h=p).lib.WordArray,h.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;i<r;i+=3)for(var o=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<r;a++)t.push(n.charAt(o>>>6*(3-a)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,r=this._map;(n=r.charAt(64))&&-1!=(n=t.indexOf(n))&&(e=n);for(var n=[],i=0,o=0;o<e;o++)if(o%4){var a=r.indexOf(t.charAt(o-1))<<o%4*2,c=r.indexOf(t.charAt(o))>>>6-o%4*2;n[i>>>2]|=(a|c)<<24-i%4*8,i++}return d.create(n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t){function e(t,e,r,n,i,o,a){return((t=t+(e&r|~e&n)+i+a)<<o|t>>>32-o)+e}function r(t,e,r,n,i,o,a){return((t=t+(e&n|r&~n)+i+a)<<o|t>>>32-o)+e}function n(t,e,r,n,i,o,a){return((t=t+(e^r^n)+i+a)<<o|t>>>32-o)+e}function i(t,e,r,n,i,o,a){return((t=t+(r^(e|~n))+i+a)<<o|t>>>32-o)+e}for(var o=p,a=(s=o.lib).WordArray,c=s.Hasher,s=o.algo,u=[],f=0;64>f;f++)u[f]=4294967296*t.abs(t.sin(f+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,o){for(var a=0;16>a;a++){var c=t[s=o+a];t[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}a=this._hash.words;var s=t[o+0],f=(c=t[o+1],t[o+2]),h=t[o+3],d=t[o+4],l=t[o+5],p=t[o+6],y=t[o+7],v=t[o+8],g=t[o+9],m=t[o+10],_=t[o+11],k=t[o+12],S=t[o+13],B=t[o+14],w=t[o+15],x=e(x=a[0],b=a[1],E=a[2],C=a[3],s,7,u[0]),C=e(C,x,b,E,c,12,u[1]),E=e(E,C,x,b,f,17,u[2]),b=e(b,E,C,x,h,22,u[3]);x=e(x,b,E,C,d,7,u[4]),C=e(C,x,b,E,l,12,u[5]),E=e(E,C,x,b,p,17,u[6]),b=e(b,E,C,x,y,22,u[7]),x=e(x,b,E,C,v,7,u[8]),C=e(C,x,b,E,g,12,u[9]),E=e(E,C,x,b,m,17,u[10]),b=e(b,E,C,x,_,22,u[11]),x=e(x,b,E,C,k,7,u[12]),C=e(C,x,b,E,S,12,u[13]),E=e(E,C,x,b,B,17,u[14]),x=r(x,b=e(b,E,C,x,w,22,u[15]),E,C,c,5,u[16]),C=r(C,x,b,E,p,9,u[17]),E=r(E,C,x,b,_,14,u[18]),b=r(b,E,C,x,s,20,u[19]),x=r(x,b,E,C,l,5,u[20]),C=r(C,x,b,E,m,9,u[21]),E=r(E,C,x,b,w,14,u[22]),b=r(b,E,C,x,d,20,u[23]),x=r(x,b,E,C,g,5,u[24]),C=r(C,x,b,E,B,9,u[25]),E=r(E,C,x,b,h,14,u[26]),b=r(b,E,C,x,v,20,u[27]),x=r(x,b,E,C,S,5,u[28]),C=r(C,x,b,E,f,9,u[29]),E=r(E,C,x,b,y,14,u[30]),x=n(x,b=r(b,E,C,x,k,20,u[31]),E,C,l,4,u[32]),C=n(C,x,b,E,v,11,u[33]),E=n(E,C,x,b,_,16,u[34]),b=n(b,E,C,x,B,23,u[35]),x=n(x,b,E,C,c,4,u[36]),C=n(C,x,b,E,d,11,u[37]),E=n(E,C,x,b,y,16,u[38]),b=n(b,E,C,x,m,23,u[39]),x=n(x,b,E,C,S,4,u[40]),C=n(C,x,b,E,s,11,u[41]),E=n(E,C,x,b,h,16,u[42]),b=n(b,E,C,x,p,23,u[43]),x=n(x,b,E,C,g,4,u[44]),C=n(C,x,b,E,k,11,u[45]),E=n(E,C,x,b,w,16,u[46]),x=i(x,b=n(b,E,C,x,f,23,u[47]),E,C,s,6,u[48]),C=i(C,x,b,E,y,10,u[49]),E=i(E,C,x,b,B,15,u[50]),b=i(b,E,C,x,l,21,u[51]),x=i(x,b,E,C,k,6,u[52]),C=i(C,x,b,E,h,10,u[53]),E=i(E,C,x,b,m,15,u[54]),b=i(b,E,C,x,c,21,u[55]),x=i(x,b,E,C,v,6,u[56]),C=i(C,x,b,E,w,10,u[57]),E=i(E,C,x,b,p,15,u[58]),b=i(b,E,C,x,S,21,u[59]),x=i(x,b,E,C,d,6,u[60]),C=i(C,x,b,E,_,10,u[61]),E=i(E,C,x,b,f,15,u[62]),b=i(b,E,C,x,g,21,u[63]);a[0]=a[0]+x|0,a[1]=a[1]+b|0,a[2]=a[2]+E|0,a[3]=a[3]+C|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(r.length+1),this._process(),r=(e=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),o.MD5=c._createHelper(s),o.HmacMD5=c._createHmacHelper(s)}(Math),function(){var t,e=p,r=(t=e.lib).Base,n=t.WordArray,i=(t=e.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=(c=this.cfg).hasher.create(),i=n.create(),o=i.words,a=c.keySize,c=c.iterations;o.length<a;){s&&r.update(s);var s=r.update(t).finalize(e);r.reset();for(var u=1;u<c;u++)s=r.finalize(s),r.reset();i.concat(s)}return i.sigBytes=4*a,i}});e.EvpKDF=function(t,e,r){return i.create(r).compute(t,e)}}(),p.lib.Cipher||function(t){var e=(l=p).lib,r=e.Base,n=e.WordArray,i=e.BufferedBlockAlgorithm,o=l.enc.Base64,a=l.algo.EvpKDF,c=e.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,r,n){return("string"==typeof r?y:d).encrypt(t,e,r,n)},decrypt:function(e,r,n){return("string"==typeof r?y:d).decrypt(t,e,r,n)}}}});e.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var s=l.mode={},u=function(t,e,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)t[e+i]^=n[i]},f=(e.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();f.Encryptor=f.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize;u.call(this,t,e,n),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),f.Decryptor=f.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=t.slice(e,e+n);r.decryptBlock(t,e),u.call(this,t,e,n),this._prevBlock=i}}),s=s.CBC=f,f=(l.pad={}).Pkcs7={pad:function(t,e){for(var r,i=(r=(r=4*e)-t.sigBytes%r)<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);r=n.create(o,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=c.extend({cfg:c.cfg.extend({mode:s,padding:f}),reset:function(){c.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var h=e.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),d=(s=(l.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?n.create([1398893684,1701076831]).concat(t).concat(e):e).toString(o)},parse:function(t){var e=(t=o.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=n.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return h.create({ciphertext:t,salt:r})}},e.SerializableCipher=r.extend({cfg:r.extend({format:s}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n);return e=i.finalize(e),i=i.cfg,h.create({ciphertext:e,key:r,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),l=(l.kdf={}).OpenSSL={execute:function(t,e,r,i){return i||(i=n.random(8)),t=a.create({keySize:e+r}).compute(t,i),r=n.create(t.words.slice(e),4*r),t.sigBytes=4*e,h.create({key:t,iv:r,salt:i})}},y=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:l}),encrypt:function(t,e,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize),n.iv=r.iv,(t=d.encrypt.call(this,t,e,r.key,n)).mixIn(r),t},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),r=n.kdf.execute(r,t.keySize,t.ivSize,e.salt),n.iv=r.iv,d.decrypt.call(this,t,e,r.key,n)}})}(),function(){for(var t=p,e=t.lib.BlockCipher,r=t.algo,n=[],i=[],o=[],a=[],c=[],s=[],u=[],f=[],h=[],d=[],l=[],y=0;256>y;y++)l[y]=128>y?y<<1:y<<1^283;var v=0,g=0;for(y=0;256>y;y++){var m=(m=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&m^99;n[v]=m,i[m]=v;var _=l[v],k=l[_],S=l[k],B=257*l[m]^16843008*m;o[v]=B<<24|B>>>8,a[v]=B<<16|B>>>16,c[v]=B<<8|B>>>24,s[v]=B,B=16843009*S^65537*k^257*_^16843008*v,u[m]=B<<24|B>>>8,f[m]=B<<16|B>>>16,h[m]=B<<8|B>>>24,d[m]=B,v?(v=_^l[l[l[S^_]]],g^=l[l[g]]):v=g=1}var w=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=e.extend({_doReset:function(){for(var t=(r=this._key).words,e=r.sigBytes/4,r=4*((this._nRounds=e+6)+1),i=this._keySchedule=[],o=0;o<r;o++)if(o<e)i[o]=t[o];else{var a=i[o-1];o%e?6<e&&4==o%e&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=w[o/e|0]<<24),i[o]=i[o-e]^a}for(t=this._invKeySchedule=[],e=0;e<r;e++)o=r-e,a=e%4?i[o]:i[o-4],t[e]=4>e||4>=o?a:u[n[a>>>24]]^f[n[a>>>16&255]]^h[n[a>>>8&255]]^d[n[255&a]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,a,c,s,n)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,u,f,h,d,i),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,a,c){for(var s=this._nRounds,u=t[e]^r[0],f=t[e+1]^r[1],h=t[e+2]^r[2],d=t[e+3]^r[3],l=4,p=1;p<s;p++){var y=n[u>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&d]^r[l++],v=n[f>>>24]^i[h>>>16&255]^o[d>>>8&255]^a[255&u]^r[l++],g=n[h>>>24]^i[d>>>16&255]^o[u>>>8&255]^a[255&f]^r[l++];d=n[d>>>24]^i[u>>>16&255]^o[f>>>8&255]^a[255&h]^r[l++],u=y,f=v,h=g}y=(c[u>>>24]<<24|c[f>>>16&255]<<16|c[h>>>8&255]<<8|c[255&d])^r[l++],v=(c[f>>>24]<<24|c[h>>>16&255]<<16|c[d>>>8&255]<<8|c[255&u])^r[l++],g=(c[h>>>24]<<24|c[d>>>16&255]<<16|c[u>>>8&255]<<8|c[255&f])^r[l++],d=(c[d>>>24]<<24|c[u>>>16&255]<<16|c[f>>>8&255]<<8|c[255&h])^r[l++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=d},keySize:8});t.AES=e._createHelper(r)}(),p.mode.ECB=((l=p.lib.BlockCipherMode.extend()).Encryptor=l.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),l.Decryptor=l.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),l);var y,v,g=function(t,e){if(!t)throw new Error("[NEQuickPass] ".concat(e))},m=function(t){return t?Object.keys(t).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))})).join("&"):""},_=function(t,e){var r,n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(e=e||i.length,t)for(r=0;r<t;r++)o[r]=i[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(n=0|16*Math.random(),o[r]=i[19===r?3&n|8:n]);return o.join("")},k=(y=[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.cookieEnabled,navigator.cpuClass,navigator.hardwareConcurrency,navigator.language,navigator.plugins,screen.availWidth,navigator.availHeight,screen.colorDepth,Date.getTimezoneOffset],v=[navigator.platform,navigator.userAgent,f(y.join("@@"))].join("@@"),encodeURIComponent(n(v))),S=0;function B(){}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Math.random().toString(36).slice(2,9),r=t.prefix||"__JSONP";return t.name||r+"_".concat(e)+"_".concat(S++)}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.method,n=void 0===r?"get":r,i=e.data,o=void 0===i?null:i,a=e.callbackName,c=e.param,s=void 0===c?"callback":c,u=e.url||"",f=m(o);return"post"!==n&&f&&(u=u+"?"+f),new Promise((function(r,i){if("jsonp"===n)!function(e,r,n,i){"object"===t(n)&&(i=n,n=null),"function"==typeof r&&(n=r,r=null),i||(i={});var o,a=i&&i.callbackName||w(),c=void 0===i.param?"callback":i.param,s=i.timeout||6e3,u=window.encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;function h(){d.parentNode&&d.parentNode.removeChild(d),window[a]=B,o&&clearTimeout(o)}s&&(o=setTimeout((function(){h(),n&&n(new Error("[NEQuickPass] Timeout"))}),s)),window[a]=function(t){h(),n&&n(null,t)},r&&(e=e.split("?")[0]),e=(e+=(~e.indexOf("?")?"&":"?")+function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(u(r)+"="+u(t[r]));return e.join("&")}(r)+(c?"&"+c+"="+u(a):"")).replace("?&","?");var d=document.createElement("script");d.type="text/javascript",d.src=e,f.parentNode.insertBefore(d,f)}(u,o,(function(t,e){if(t){var n=new Error("[NEQuickPass] request ".concat(u," api"));n.data={url:u},i(n)}else r(e)}),{callbackName:a,param:s});else{var c=new XMLHttpRequest;if(!c)return i(new Error("[NEQuickPass] cannot creat an XMLHTTP instance"));c.onreadystatechange=function(){if(c.readyState===XMLHttpRequest.DONE)if(304===c.status||c.status>=200&&c.status<300){var t=JSON.parse(c.responseText);r(t)}else{var n=new Error("[NEQuickPass]: request ".concat(e.url," error"));n.data={url:e.url},i(n)}},c.open(n,u,!0),c.send("get"===n?null:JSON.stringify(o))}}))}var C=[1,"电信"],E=[2,"移动"];function b(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}return function(){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),g(t,"appId is required"),this.appId=t,this.timeout="number"==typeof e.timeout?e.timeout:12e3,this.timer=null}var n,i,o;return n=r,(i=[{key:"getToken",value:function(e,r){try{var n=this;if(n.timer)return;return b(Promise.race([new Promise((function(t,e){n.timer=setTimeout((function(){n.timer=null,e(new Error("[NEQuickPass] timeout"))}),n.timeout)})),(i=function(){var r=w(),i={businessId:n.appId,phone:e,envType:3,nonce:_(32),timestamp:Date.now(),extData:JSON.stringify({cm:{userInformation:k},ct:{callback:r}})},o=function(e){var r="".concat(_(3),":").concat(_(3),":").concat(_(3),":").concat(_(4)),n=p.enc.Utf8.parse(r),i=p.AES.encrypt(e,n,{mode:p.mode.ECB,padding:p.pad.Pkcs7}).ciphertext.toString(),o=p.enc.Hex.parse(i),a=p.enc.Base64.stringify(o);return"object"===t(e)&&(e=JSON.stringify(e)),{key:r,parsedKey:n,eyptStr:a}}(JSON.stringify(i)),a=o.key,c=o.eyptStr,s=o.parsedKey,u="https://ye.dun.163yun.com/v1/preCheck";return b(x({url:u,data:{d:c,rk:a}}),(function(t){if(200!==t.code){var e=new Error("[NEQuickPass] ".concat(t.msg));throw e.data={url:u,code:t.code},e}var i,o,a,c,f=JSON.parse((i=t.data,o=s,p.AES.decrypt(i,o,{mode:p.mode.ECB,padding:p.pad.Pkcs7}).toString(p.enc.Utf8))),h=f.ot,d=f.token,l="",y="post",v=null;return a=function(t){return b(x({url:l,method:y,data:v,callbackName:r,param:""}),(function(t){var e=function(t,e){if(e===E[0]){var r=t.body.token;if(!r){var n=new Error("[NEQuickPass] ".concat(t.body.resultDesc));throw n.data={code:t.header.resultCode},n}return r}if(0!==t.result){var i=new Error("[NEQuickPass] ".concat(t.msg));throw i.data={code:t.result},i}return t.data}(t,h);return clearTimeout(n.timer),n.timer=null,{token:d,accessToken:e}}))},(c=function(){if(h===E[0]){var t=JSON.parse(f.url||{});return b(function(t){return new Promise((function(e,r){var n=new Image;n.src=t,n.style.display="none",document.body.appendChild(n),n.onload=function(){document.body.removeChild(n),e()},n.onerror=function(){document.body.removeChild(n);var e=new Error("[NEQuickPass] ".concat(t));e.data={type:"img"},r(e)}}))}(t.preUrl),(function(){var e=t.tokenUrl,r=e.header,n=e.body,i=e.api;l=i,v={header:r,body:n}}))}if(h!==C[0])throw new Error("[NEQuickPass] 暂不支持联通");l=f.url,y="jsonp"}())&&c.then?c.then(a):a(c)}))},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(i.apply(this,t))}catch(r){return Promise.reject(r)}})()]).then((function(t){r(null,t)}),(function(t){r(t)})))}catch(o){return Promise.reject(o)}var i}}])&&e(n.prototype,i),o&&e(n,o),r}()}));
