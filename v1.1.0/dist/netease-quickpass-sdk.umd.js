!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).NEQuickPass=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var i=8,o=function(e){var t,r,n,i,o,a,c,s="",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e);f<e.length;)i=(t=e.charCodeAt(f++))>>2,o=(3&t)<<4|(r=e.charCodeAt(f++))>>4,a=(15&r)<<2|(n=e.charCodeAt(f++))>>6,c=63&n,isNaN(r)?a=c=64:isNaN(n)&&(c=64),s=s+u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(c);return s};function a(e,t,r,n,i,o){return d((a=d(d(t,e),d(n,o)))<<(c=i)|a>>>32-c,r);var a,c}function c(e,t,r,n,i,o,c){return a(t&r|~t&n,e,t,i,o,c)}function s(e,t,r,n,i,o,c){return a(t&n|r&~n,e,t,i,o,c)}function u(e,t,r,n,i,o,c){return a(t^r^n,e,t,i,o,c)}function f(e,t,r,n,i,o,c){return a(r^(t|~n),e,t,i,o,c)}function d(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function l(e){return function(e){for(var t="",r=0;r<4*e.length;r++)t+="0123456789abcdef".charAt(e[r>>2]>>r%4*8+4&15)+"0123456789abcdef".charAt(e[r>>2]>>r%4*8&15);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var l=r,p=n,h=i,v=o;r=c(r,n,i,o,e[a+0],7,-680876936),o=c(o,r,n,i,e[a+1],12,-389564586),i=c(i,o,r,n,e[a+2],17,606105819),n=c(n,i,o,r,e[a+3],22,-1044525330),r=c(r,n,i,o,e[a+4],7,-176418897),o=c(o,r,n,i,e[a+5],12,1200080426),i=c(i,o,r,n,e[a+6],17,-1473231341),n=c(n,i,o,r,e[a+7],22,-45705983),r=c(r,n,i,o,e[a+8],7,1770035416),o=c(o,r,n,i,e[a+9],12,-1958414417),i=c(i,o,r,n,e[a+10],17,-42063),n=c(n,i,o,r,e[a+11],22,-1990404162),r=c(r,n,i,o,e[a+12],7,1804603682),o=c(o,r,n,i,e[a+13],12,-40341101),i=c(i,o,r,n,e[a+14],17,-1502002290),r=s(r,n=c(n,i,o,r,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=s(o,r,n,i,e[a+6],9,-1069501632),i=s(i,o,r,n,e[a+11],14,643717713),n=s(n,i,o,r,e[a+0],20,-373897302),r=s(r,n,i,o,e[a+5],5,-701558691),o=s(o,r,n,i,e[a+10],9,38016083),i=s(i,o,r,n,e[a+15],14,-660478335),n=s(n,i,o,r,e[a+4],20,-405537848),r=s(r,n,i,o,e[a+9],5,568446438),o=s(o,r,n,i,e[a+14],9,-1019803690),i=s(i,o,r,n,e[a+3],14,-187363961),n=s(n,i,o,r,e[a+8],20,1163531501),r=s(r,n,i,o,e[a+13],5,-1444681467),o=s(o,r,n,i,e[a+2],9,-51403784),i=s(i,o,r,n,e[a+7],14,1735328473),r=u(r,n=s(n,i,o,r,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=u(o,r,n,i,e[a+8],11,-2022574463),i=u(i,o,r,n,e[a+11],16,1839030562),n=u(n,i,o,r,e[a+14],23,-35309556),r=u(r,n,i,o,e[a+1],4,-1530992060),o=u(o,r,n,i,e[a+4],11,1272893353),i=u(i,o,r,n,e[a+7],16,-155497632),n=u(n,i,o,r,e[a+10],23,-1094730640),r=u(r,n,i,o,e[a+13],4,681279174),o=u(o,r,n,i,e[a+0],11,-358537222),i=u(i,o,r,n,e[a+3],16,-722521979),n=u(n,i,o,r,e[a+6],23,76029189),r=u(r,n,i,o,e[a+9],4,-640364487),o=u(o,r,n,i,e[a+12],11,-421815835),i=u(i,o,r,n,e[a+15],16,530742520),r=f(r,n=u(n,i,o,r,e[a+2],23,-995338651),i,o,e[a+0],6,-198630844),o=f(o,r,n,i,e[a+7],10,1126891415),i=f(i,o,r,n,e[a+14],15,-1416354905),n=f(n,i,o,r,e[a+5],21,-57434055),r=f(r,n,i,o,e[a+12],6,1700485571),o=f(o,r,n,i,e[a+3],10,-1894986606),i=f(i,o,r,n,e[a+10],15,-1051523),n=f(n,i,o,r,e[a+1],21,-2054922799),r=f(r,n,i,o,e[a+8],6,1873313359),o=f(o,r,n,i,e[a+15],10,-30611744),i=f(i,o,r,n,e[a+6],15,-1560198380),n=f(n,i,o,r,e[a+13],21,1309151649),r=f(r,n,i,o,e[a+4],6,-145523070),o=f(o,r,n,i,e[a+11],10,-1120210379),i=f(i,o,r,n,e[a+2],15,718787259),n=f(n,i,o,r,e[a+9],21,-343485551),r=d(r,l),n=d(n,p),i=d(i,h),o=d(o,v)}return Array(r,n,i,o)}(function(e){for(var t=Array(),r=(1<<i)-1,n=0;n<e.length*i;n+=i)t[n>>5]|=(e.charCodeAt(n/i)&r)<<n%32;return t}(e),e.length*i))}var p,h,v,y=y||function(e,t){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var i=0;i<e;i++)t[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<e;i+=4)t[n+i>>>2]=r[i>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new a.init(r,t)}}),c=r.enc={},s=c.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(r,t/2)}},u=c.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(r,t)}},f=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,c=i/(4*o);if(t=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*o,i=e.min(4*t,i),t){for(var s=0;s<t;s+=o)this._doProcessBlock(n,s);s=n.splice(0,t),r.sigBytes-=i}return new a.init(s,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new l.HMAC.init(e,r).finalize(t)}}});var l=r.algo={};return r}(Math);h=(p=y).lib.WordArray,p.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<r;a++)e.push(n.charAt(o>>>6*(3-a)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(n=r.charAt(64))&&-1!=(n=e.indexOf(n))&&(t=n);for(var n=[],i=0,o=0;o<t;o++)if(o%4){var a=r.indexOf(e.charAt(o-1))<<o%4*2,c=r.indexOf(e.charAt(o))>>>6-o%4*2;n[i>>>2]|=(a|c)<<24-i%4*8,i++}return h.create(n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,r,n,i,o,a){return((e=e+(t&r|~t&n)+i+a)<<o|e>>>32-o)+t}function r(e,t,r,n,i,o,a){return((e=e+(t&n|r&~n)+i+a)<<o|e>>>32-o)+t}function n(e,t,r,n,i,o,a){return((e=e+(t^r^n)+i+a)<<o|e>>>32-o)+t}function i(e,t,r,n,i,o,a){return((e=e+(r^(t|~n))+i+a)<<o|e>>>32-o)+t}for(var o=y,a=(s=o.lib).WordArray,c=s.Hasher,s=o.algo,u=[],f=0;64>f;f++)u[f]=4294967296*e.abs(e.sin(f+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var a=0;16>a;a++){var c=e[s=o+a];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}a=this._hash.words;var s=e[o+0],f=(c=e[o+1],e[o+2]),d=e[o+3],l=e[o+4],p=e[o+5],h=e[o+6],v=e[o+7],y=e[o+8],m=e[o+9],g=e[o+10],_=e[o+11],k=e[o+12],E=e[o+13],C=e[o+14],w=e[o+15],R=t(R=a[0],b=a[1],S=a[2],O=a[3],s,7,u[0]),O=t(O,R,b,S,c,12,u[1]),S=t(S,O,R,b,f,17,u[2]),b=t(b,S,O,R,d,22,u[3]);R=t(R,b,S,O,l,7,u[4]),O=t(O,R,b,S,p,12,u[5]),S=t(S,O,R,b,h,17,u[6]),b=t(b,S,O,R,v,22,u[7]),R=t(R,b,S,O,y,7,u[8]),O=t(O,R,b,S,m,12,u[9]),S=t(S,O,R,b,g,17,u[10]),b=t(b,S,O,R,_,22,u[11]),R=t(R,b,S,O,k,7,u[12]),O=t(O,R,b,S,E,12,u[13]),S=t(S,O,R,b,C,17,u[14]),R=r(R,b=t(b,S,O,R,w,22,u[15]),S,O,c,5,u[16]),O=r(O,R,b,S,h,9,u[17]),S=r(S,O,R,b,_,14,u[18]),b=r(b,S,O,R,s,20,u[19]),R=r(R,b,S,O,p,5,u[20]),O=r(O,R,b,S,g,9,u[21]),S=r(S,O,R,b,w,14,u[22]),b=r(b,S,O,R,l,20,u[23]),R=r(R,b,S,O,m,5,u[24]),O=r(O,R,b,S,C,9,u[25]),S=r(S,O,R,b,d,14,u[26]),b=r(b,S,O,R,y,20,u[27]),R=r(R,b,S,O,E,5,u[28]),O=r(O,R,b,S,f,9,u[29]),S=r(S,O,R,b,v,14,u[30]),R=n(R,b=r(b,S,O,R,k,20,u[31]),S,O,p,4,u[32]),O=n(O,R,b,S,y,11,u[33]),S=n(S,O,R,b,_,16,u[34]),b=n(b,S,O,R,C,23,u[35]),R=n(R,b,S,O,c,4,u[36]),O=n(O,R,b,S,l,11,u[37]),S=n(S,O,R,b,v,16,u[38]),b=n(b,S,O,R,g,23,u[39]),R=n(R,b,S,O,E,4,u[40]),O=n(O,R,b,S,s,11,u[41]),S=n(S,O,R,b,d,16,u[42]),b=n(b,S,O,R,h,23,u[43]),R=n(R,b,S,O,m,4,u[44]),O=n(O,R,b,S,k,11,u[45]),S=n(S,O,R,b,w,16,u[46]),R=i(R,b=n(b,S,O,R,f,23,u[47]),S,O,s,6,u[48]),O=i(O,R,b,S,v,10,u[49]),S=i(S,O,R,b,C,15,u[50]),b=i(b,S,O,R,p,21,u[51]),R=i(R,b,S,O,k,6,u[52]),O=i(O,R,b,S,d,10,u[53]),S=i(S,O,R,b,g,15,u[54]),b=i(b,S,O,R,c,21,u[55]),R=i(R,b,S,O,y,6,u[56]),O=i(O,R,b,S,w,10,u[57]),S=i(S,O,R,b,h,15,u[58]),b=i(b,S,O,R,E,21,u[59]),R=i(R,b,S,O,l,6,u[60]),O=i(O,R,b,S,_,10,u[61]),S=i(S,O,R,b,f,15,u[62]),b=i(b,S,O,R,m,21,u[63]);a[0]=a[0]+R|0,a[1]=a[1]+b|0,a[2]=a[2]+S|0,a[3]=a[3]+O|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=c._createHelper(s),o.HmacMD5=c._createHmacHelper(s)}(Math),function(){var e,t=y,r=(e=t.lib).Base,n=e.WordArray,i=(e=t.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=(c=this.cfg).hasher.create(),i=n.create(),o=i.words,a=c.keySize,c=c.iterations;o.length<a;){s&&r.update(s);var s=r.update(e).finalize(t);r.reset();for(var u=1;u<c;u++)s=r.finalize(s),r.reset();i.concat(s)}return i.sigBytes=4*a,i}});t.EvpKDF=function(e,t,r){return i.create(r).compute(e,t)}}(),y.lib.Cipher||function(e){var t=(p=y).lib,r=t.Base,n=t.WordArray,i=t.BufferedBlockAlgorithm,o=p.enc.Base64,a=p.algo.EvpKDF,c=t.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?h:l).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?h:l).decrypt(e,t,r,n)}}}});t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var s=p.mode={},u=function(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]},f=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();f.Encryptor=f.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;u.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),f.Decryptor=f.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),u.call(this,e,t,n),this._prevBlock=i}}),s=s.CBC=f,f=(p.pad={}).Pkcs7={pad:function(e,t){for(var r,i=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);r=n.create(o,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:s,padding:f}),reset:function(){c.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(s=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(o)},parse:function(e){var t=(e=o.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:s}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,d.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,r,i){return i||(i=n.random(8)),e=a.create({keySize:t+r}).compute(e,i),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,d.create({key:e,iv:r,salt:i})}},h=t.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:p}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=l.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,l.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=y,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],o=[],a=[],c=[],s=[],u=[],f=[],d=[],l=[],p=[],h=0;256>h;h++)p[h]=128>h?h<<1:h<<1^283;var v=0,m=0;for(h=0;256>h;h++){var g=(g=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&g^99;n[v]=g,i[g]=v;var _=p[v],k=p[_],E=p[k],C=257*p[g]^16843008*g;o[v]=C<<24|C>>>8,a[v]=C<<16|C>>>16,c[v]=C<<8|C>>>24,s[v]=C,C=16843009*E^65537*k^257*_^16843008*v,u[g]=C<<24|C>>>8,f[g]=C<<16|C>>>16,d[g]=C<<8|C>>>24,l[g]=C,v?(v=_^p[p[p[E^_]]],m^=p[p[m]]):v=m=1}var w=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],o=0;o<r;o++)if(o<t)i[o]=e[o];else{var a=i[o-1];o%t?6<t&&4==o%t&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=w[o/t|0]<<24),i[o]=i[o-t]^a}for(e=this._invKeySchedule=[],t=0;t<r;t++)o=r-t,a=t%4?i[o]:i[o-4],e[t]=4>t||4>=o?a:u[n[a>>>24]]^f[n[a>>>16&255]]^d[n[a>>>8&255]]^l[n[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,c,s,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,f,d,l,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,c){for(var s=this._nRounds,u=e[t]^r[0],f=e[t+1]^r[1],d=e[t+2]^r[2],l=e[t+3]^r[3],p=4,h=1;h<s;h++){var v=n[u>>>24]^i[f>>>16&255]^o[d>>>8&255]^a[255&l]^r[p++],y=n[f>>>24]^i[d>>>16&255]^o[l>>>8&255]^a[255&u]^r[p++],m=n[d>>>24]^i[l>>>16&255]^o[u>>>8&255]^a[255&f]^r[p++];l=n[l>>>24]^i[u>>>16&255]^o[f>>>8&255]^a[255&d]^r[p++],u=v,f=y,d=m}v=(c[u>>>24]<<24|c[f>>>16&255]<<16|c[d>>>8&255]<<8|c[255&l])^r[p++],y=(c[f>>>24]<<24|c[d>>>16&255]<<16|c[l>>>8&255]<<8|c[255&u])^r[p++],m=(c[d>>>24]<<24|c[l>>>16&255]<<16|c[u>>>8&255]<<8|c[255&f])^r[p++],l=(c[l>>>24]<<24|c[u>>>16&255]<<16|c[f>>>8&255]<<8|c[255&d])^r[p++],e[t]=v,e[t+1]=y,e[t+2]=m,e[t+3]=l},keySize:8});e.AES=t._createHelper(r)}(),y.mode.ECB=((v=y.lib.BlockCipherMode.extend()).Encryptor=v.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),v.Decryptor=v.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),v);var m,g,_=function(e,t){if(!e)throw new Error("[NEQuickPass] ".concat(t))},k=function(e){return e?Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&"):""},E=function(e,t){var r,n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||i.length,e)for(r=0;r<e;r++)o[r]=i[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(n=0|16*Math.random(),o[r]=i[19===r?3&n|8:n]);return o.join("")},C=(m=[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.cookieEnabled,navigator.cpuClass,navigator.hardwareConcurrency,navigator.language,navigator.plugins,screen.availWidth,navigator.availHeight,screen.colorDepth,Date.getTimezoneOffset],g=[navigator.platform,navigator.userAgent,l(m.join("@@"))].join("@@"),encodeURIComponent(o(g))),w=0;function R(){}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Math.random().toString(36).slice(2,9),r=e.prefix||"__JSONP";return e.name||r+"_".concat(t)+"_".concat(w++)}var S=[1,"电信"],b=[2,"移动"],B=[3,"联通"],x={CU_AUTH_ERROR:[100001,"联通应用鉴权错误"],CU_CONFIG_ERROR:[200001,"获取联通配置接口错误等"],CU_GETWAY_ERROR:[300001,"网关鉴权失败"],CU_AUTH_CODE_ERROR:[300002,"鉴权码获取失败"],CU_ACESSS_ERROR:[300003,"联通sdk-server预取号失败"],CU_TOKEN_ERROR:[100001,"联通获取token失败"],API_ERROR:[-8001,"网络异常"]};function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.method,n=void 0===r?"get":r,i=t.data,o=void 0===i?null:i,a=t.callbackName,c=t.param,s=void 0===c?"callback":c,u=t.timeout,f=void 0===u?1e4:u,d=t.url||"",l=t.headers||{},p=k(o);return"post"!==n&&p&&(d=d+"?"+p),new Promise((function(r,i){if("jsonp"===n)!function(t,r,n,i){"object"===e(n)&&(i=n,n=null),"function"==typeof r&&(n=r,r=null),i||(i={});var o,a=i&&i.callbackName||O(),c=void 0===i.param?"callback":i.param,s=i.timeout||6e3,u=window.encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;function d(){l.parentNode&&l.parentNode.removeChild(l),window[a]=R,o&&clearTimeout(o)}s&&(o=setTimeout((function(){d(),n&&n(new Error("[NEQuickPass] request ".concat(t," timeout")))}),s)),window[a]=function(e){d(),n&&n(null,e)},r&&(t=t.split("?")[0]),t=(t+=(~t.indexOf("?")?"&":"?")+function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(u(r)+"="+u(e[r]));return t.join("&")}(r)+(c?"&"+c+"="+u(a):"")).replace("?&","?");var l=document.createElement("script");l.type="text/javascript",l.src=t,f.parentNode.insertBefore(l,f)}(d,o,(function(e,t){if(e){var n=new Error(e.message);n.data={url:d,code:x.API_ERROR[0]},i(n)}else r({data:t})}),{callbackName:a,param:s,timeout:f});else{var c=new XMLHttpRequest;if(!c)return i(new Error("[NEQuickPass] cannot creat an XMLHTTP instance"));for(var u in c.onreadystatechange=function(){if(c.readyState===XMLHttpRequest.DONE)if(304===c.status||c.status>=200&&c.status<300){var e=JSON.parse(c.responseText);r({data:e,xhr:c})}else{var n=new Error("[NEQuickPass]: request ".concat(t.url," api error"));n.data={url:t.url,code:x.API_ERROR[0]},i(n)}},c.ontimeout=function(){console.log(33);var e=new Error("[NEQuickPass]: request ".concat(t.url," timeout"));e.data={url:t.url,code:x.API_ERROR[0]},i(e)},c.open(n,d,!0),c.timeout=f,l)l.hasOwnProperty(u)&&c.setRequestHeader(u,l[u]);c.send("get"===n?null:JSON.stringify(o))}}))}function N(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function A(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(n){return Promise.reject(n)}}}return function(){function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),_(e,"appId is required"),this.appId=e,this.timeout="number"==typeof t.timeout?t.timeout:12e3,this.timer=null,this.cuHeaders=null}var o,a,c;return o=i,(a=[{key:"getToken",value:function(t,i){try{var o=this;if(o.timer)return;return N(Promise.race([new Promise((function(e,t){o.timer=setTimeout((function(){o.timer=null,t(new Error("[NEQuickPass] timeout"))}),o.timeout)})),A((function(){var i=O(),a={businessId:o.appId,phone:t,envType:3,nonce:E(32),timestamp:Date.now(),extData:JSON.stringify({cm:{userInformation:C},ct:{callback:i},cu:{}})},c=function(t){var r="".concat(E(3),":").concat(E(3),":").concat(E(3),":").concat(E(4)),n=y.enc.Utf8.parse(r),i=y.AES.encrypt(t,n,{mode:y.mode.ECB,padding:y.pad.Pkcs7}).ciphertext.toString(),o=y.enc.Hex.parse(i),a=y.enc.Base64.stringify(o);return"object"===e(t)&&(t=JSON.stringify(t)),{key:r,parsedKey:n,eyptStr:a}}(JSON.stringify(a)),s=c.key,u=c.eyptStr,f=c.parsedKey,d="https://ye.dun.163yun.com/v1/preCheck";return N(P({url:d,data:{d:u,rk:s}}),(function(e){var t=e.data;if(200!==t.code){var a=new Error("[NEQuickPass] ".concat(t.msg));throw a.data={url:d,code:t.code},a}var c,s,u,p,h=JSON.parse((c=t.data,s=f,y.AES.decrypt(c,s,{mode:y.mode.ECB,padding:y.pad.Pkcs7}).toString(y.enc.Utf8))),v=h.ot,m=h.token,g="",_="post",k=null,E=null;return u=function(e){return N(P({url:g,method:_,data:k,callbackName:i,param:"",headers:E}),(function(e){var t=function(e,t){if(t===b[0]){var r=e.body.token;if(!r){var n=new Error("[NEQuickPass] ".concat(e.body.resultDesc));throw n.data={code:e.header.resultCode},n}return r}if(t===B[0]){if(0!==e.result){var i=new Error("[NEQuickPass] ".concat(x.CU_TOKEN_ERROR[1]));throw i.data={code:x.CU_TOKEN_ERROR[0]},i}return e.content.accessToken}if(t===S[0]){if(0!==e.result){var o=new Error("[NEQuickPass] ".concat(e.msg));throw o.data={code:e.result},o}return e.data}return""}(e.data,v);return clearTimeout(o.timer),o.timer=null,{token:m,accessToken:t}}))},(p=function(){if(v===b[0]){var e=JSON.parse(h.url||{});return N(function(e){return new Promise((function(t,r){var n=new Image;n.src=e,n.style.display="none",document.body.appendChild(n),n.onload=function(){document.body.removeChild(n),t()},n.onerror=function(){document.body.removeChild(n);var t=new Error("[NEQuickPass] ".concat(e));t.data={type:"img"},r(t)}}))}(e.preUrl),(function(){var t=e.tokenUrl,r=t.header,n=t.body,i=t.api;g=i,k={header:r,body:n}}))}return function(){if(v!==S[0])return function(){if(v===B[0]){var e=JSON.parse(h.url||{});g="https://sdk.microwu.com/api-verify-mobile/app/v1/login";var t={"Req-Timestamp":e.reqTimeStamp,"Client-Id":e.clientId,Authorization:"Digest ".concat(e.authorization),"Client-Type":"H5"};return N(function(e,t){var r=A((function(e,t){var r=e.code,n=e.province,i="https://sdk.microwu.com/api-verify-mobile/app/v1/pre-net-id";return N(P({url:i,method:"get",headers:t,data:{code:r,deviceInfo:'{"device-id":""}',province:n,sign:l("code=".concat(r,'&deviceInfo={"device-id":""}&province=').concat(n))}}),(function(e){var t=e.data,r=e.xhr;if(0===t.result)return{traceId:t.content.traceId||r.getResponseHeader("Trace-Id"),accessCode:t.content.accessCode};var n=new Error("[NEQuickPass] ".concat(x.CU_CONFIG_ERROR[1]));throw n.data={url:i,code:x.CU_CONFIG_ERROR[0]},n}))})),n=A((function(e){var t="https://sdk.microwu.com/api-config/app/v1/get-config";return N(P({url:t,method:"get",headers:e}),(function(e){var r=e.data;if(0===r.result)return{appId:r.content.appId,nisPortalAddress:r.content.nisPortalAddress};if([104,107].indexOf(r.result)>-1){var n=new Error("[NEQuickPass] ".concat(x.CU_AUTH_ERROR[1]));throw n.data={url:t,code:x.CU_AUTH_ERROR[0]},n}var i=new Error("[NEQuickPass] ".concat(x.CU_CONFIG_ERROR[1]));throw i.data={url:t,code:x.CU_CONFIG_ERROR[0]},i}))}));return e.reqTimeStamp,e.clientId,e.authorization,N(n(t),(function(e){var n=e.nisPortalAddress,i=e.appId;return N(P({url:n,method:"jsonp",callbackName:"getPortal",data:{appId:i}}),(function(e){var o=e.data.authurl;if(!o){var a=new Error("[NEQuickPass] ".concat(x.CU_GETWAY_ERROR[1]));throw a.data={url:n,code:x.CU_GETWAY_ERROR[0]},a}var c="".concat(o,"/api");return N(P({url:c,method:"jsonp",callbackName:"getProvincePortal",data:{appId:i}}),(function(e){var n=e.data,i=n.code,o=n.province;if(!i||!o){var a=new Error("[NEQuickPass] ".concat(x.CU_AUTH_CODE_ERROR[1]));throw a.data={url:c,code:x.CU_AUTH_CODE_ERROR[0]},a}return N(r({code:i,province:o},t))}))}))}))}(e,t),(function(e){E=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(i,!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t,{"Trace-Id":e.traceId}),k={accessCode:e.accessCode,sign:l("accessCode=".concat(e.accessCode))},_="get"}))}throw new Error("[NEQuickPass] 当前仅支持移动/联通/电信")}();g=h.url,_="jsonp"}()}())&&p.then?p.then(u):u(p)}))}))()]).then((function(e){i(null,e)}),(function(e){i(e)})))}catch(a){return Promise.reject(a)}}}])&&t(o.prototype,a),c&&t(o,c),i}()}));
